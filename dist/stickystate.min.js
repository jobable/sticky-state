(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.StickyState=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var assign=_dereq_("object-assign");var FastScroll=_dereq_("fastscroll");var _globals={featureTested:false};var defaults={disabled:false,className:"sticky",stateClassName:"is-sticky",fixedClass:"sticky-fixed",wrapperClass:"sticky-wrap",absoluteClass:"is-absolute"};function getScrollPosition(){return window.scrollY||window.pageYOffset||0}function getDocumentHeight(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function getAbsolutBoundingRect(el,fixedHeight){var rect=el.getBoundingClientRect();var top=rect.top+getScrollPosition();var height=fixedHeight||rect.height;return{top:top,bottom:top+height,height:height,width:rect.width}}function addBounds(rect1,rect2){var rect=assign({},rect1);rect.top-=rect2.top;rect.bottom=rect.top+rect1.height;return rect}function getPositionStyle(el){var obj={top:null,bottom:null};for(var key in obj){var value=parseInt(window.getComputedStyle(el)[key]);value=isNaN(value)?null:value;obj[key]=value}return obj}function getPreviousElementSibling(el){var prev=el.previousElementSibling;if(prev&&prev.tagName.toLocaleLowerCase()==="script"){prev=getPreviousElementSibling(prev)}return prev}var StickyState=function(element,options){if(!element){throw new Error("StickyState needs a DomElement")}this.el=element;this.options=assign({},defaults,options);this.setState({sticky:false,absolute:false,fixedOffset:"",offsetHeight:0,bounds:{top:null,bottom:null,height:null,width:null},restrict:{top:null,bottom:null,height:null,width:null},style:{top:null,bottom:null},disabled:this.options.disabled},true);this.initialStyle=getPositionStyle(this.el);this.scrollTarget=window.getComputedStyle(this.el.parentNode).overflow!=="auto"?window:this.el.parentNode;this.hasOwnScrollTarget=this.scrollTarget!==window;if(this.hasOwnScrollTarget){this.updateFixedOffset=this.updateFixedOffset.bind(this)}this.firstRender=true;this.resizeHandler=null;this.fastScroll=null;this.wrapper=null;this.render=this.render.bind(this);this.addSrollHandler();this.addResizeHandler();this.render()};StickyState.prototype.setState=function(newState,silent){this.lastState=this.state||newState;this.state=assign({},this.state,newState);if(silent!==true){this.render()}};StickyState.prototype.getBoundingClientRect=function(){return this.el.getBoundingClientRect()};StickyState.prototype.getBounds=function(noCache){var clientRect=this.getBoundingClientRect();var offsetHeight=getDocumentHeight();if(noCache!==true&&this.state.bounds.height!==null){if(this.state.offsetHeight===offsetHeight&&clientRect.height===this.state.bounds.height){return{offsetHeight:offsetHeight,style:this.state.style,bounds:this.state.bounds,restrict:this.state.restrict}}}var style=getPositionStyle(this.el);var child=this.wrapper||this.el;var rect;var restrict;var offset=0;if(!this.canSticky()){rect=getAbsolutBoundingRect(child,clientRect.height);if(this.hasOwnScrollTarget){var parentRect=getAbsolutBoundingRect(this.scrollTarget);offset=this.fastScroll.scrollY;rect=addBounds(rect,parentRect);restrict=parentRect;restrict.top=0;restrict.height=this.scrollTarget.scrollHeight||restrict.height;restrict.bottom=restrict.height}}else{var elem=getPreviousElementSibling(child);offset=0;if(elem){offset=parseInt(window.getComputedStyle(elem)["margin-bottom"]);offset=offset||0;rect=getAbsolutBoundingRect(elem);if(this.hasOwnScrollTarget){rect=addBounds(rect,getAbsolutBoundingRect(this.scrollTarget));offset+=this.fastScroll.scrollY}rect.top=rect.bottom+offset}else{elem=child.parentNode;offset=parseInt(window.getComputedStyle(elem)["padding-top"]);offset=offset||0;rect=getAbsolutBoundingRect(elem);if(this.hasOwnScrollTarget){rect=addBounds(rect,getAbsolutBoundingRect(this.scrollTarget));offset+=this.fastScroll.scrollY}rect.top=rect.top+offset}if(this.hasOwnScrollTarget){restrict=getAbsolutBoundingRect(this.scrollTarget);restrict.top=0;restrict.height=this.scrollTarget.scrollHeight||restrict.height;restrict.bottom=restrict.height}rect.height=child.clientHeight;rect.width=child.clientWidth;rect.bottom=rect.top+rect.height}restrict=restrict||getAbsolutBoundingRect(child.parentNode);return{offsetHeight:offsetHeight,style:style,bounds:rect,restrict:restrict}};StickyState.prototype.updateBounds=function(silent){silent=silent===true;this.setState(this.getBounds(true),silent)};StickyState.prototype.updateFixedOffset=function(){this.lastState.fixedOffset=this.state.fixedOffset;if(this.state.sticky){this.state.fixedOffset=this.scrollTarget.getBoundingClientRect().top+"px"}else{this.state.fixedOffset=""}if(this.lastState.fixedOffset!==this.state.fixedOffset){this.render()}};StickyState.prototype.canSticky=function(){return StickyState.native()};StickyState.prototype.addSrollHandler=function(){if(!this.fastScroll){var hasScrollTarget=FastScroll.hasScrollTarget(this.scrollTarget);this.fastScroll=FastScroll.getInstance(this.scrollTarget);this.onScroll=this.onScroll.bind(this);this.fastScroll.on("scroll:start",this.onScroll);this.fastScroll.on("scroll:progress",this.onScroll);this.fastScroll.on("scroll:stop",this.onScroll);if(hasScrollTarget&&this.fastScroll.scrollY>0){this.fastScroll.trigger("scroll:progress")}}};StickyState.prototype.removeSrollHandler=function(){if(this.fastScroll){this.fastScroll.off("scroll:start",this.onScroll);this.fastScroll.off("scroll:progress",this.onScroll);this.fastScroll.off("scroll:stop",this.onScroll);this.fastScroll.destroy();this.fastScroll=null}};StickyState.prototype.addResizeHandler=function(){if(!this.resizeHandler){this.resizeHandler=this.onResize.bind(this);window.addEventListener("resize",this.resizeHandler,false);window.addEventListener("orientationchange",this.resizeHandler,false)}};StickyState.prototype.removeResizeHandler=function(){if(this.resizeHandler){window.removeEventListener("resize",this.resizeHandler);window.removeEventListener("orientationchange",this.resizeHandler);this.resizeHandler=null}};StickyState.prototype.onScroll=function(e){this.updateStickyState(false);if(this.hasOwnScrollTarget&&!this.canSticky()){this.updateFixedOffset();if(this.state.sticky&&!this.hasWindowScrollListener){this.hasWindowScrollListener=true;FastScroll.getInstance(window).on("scroll:progress",this.updateFixedOffset)}else if(!this.state.sticky&&this.hasWindowScrollListener){this.hasWindowScrollListener=false;FastScroll.getInstance(window).off("scroll:progress",this.updateFixedOffset)}}};StickyState.prototype.onResize=function(e){this.updateBounds(true);this.updateStickyState(false)};StickyState.prototype.getStickyState=function(){if(this.state.disabled){return{sticky:false,absolute:false}}var scrollY=this.fastScroll.scrollY;var top=this.initialStyle.top;var bottom=this.initialStyle.bottom;var sticky=this.state.sticky;var absolute=this.state.absolute;if(top!==null){var offsetBottom=this.state.restrict.bottom-this.state.bounds.height-top;top=this.state.bounds.top-top;if(this.state.sticky===false&&scrollY>=top&&scrollY<=offsetBottom){sticky=true;absolute=false}else if(this.state.sticky&&(scrollY<top||scrollY>offsetBottom)){sticky=false;absolute=scrollY>offsetBottom}}else if(bottom!==null){scrollY+=window.innerHeight;var offsetTop=this.state.restrict.top+this.state.bounds.height-bottom;bottom=this.state.bounds.bottom+bottom;if(this.state.sticky===false&&scrollY<=bottom&&scrollY>=offsetTop){sticky=true;absolute=false}else if(this.state.sticky&&(scrollY>bottom||scrollY<offsetTop)){sticky=false;absolute=scrollY<=offsetTop}}return{sticky:sticky,absolute:absolute}};StickyState.prototype.updateStickyState=function(silent){var values=this.getStickyState();if(values.sticky!==this.state.sticky||values.absolute!==this.state.absolute){silent=silent===true;values=assign(values,this.getBounds());this.setState(values,silent)}};StickyState.prototype.render=function(){var className=this.el.className;if(this.firstRender){this.firstRender=false;if(!this.canSticky()){this.wrapper=document.createElement("div");this.wrapper.className=this.options.wrapperClass;var parent=this.el.parentNode;if(parent){parent.insertBefore(this.wrapper,this.el)}this.wrapper.appendChild(this.el);className+=" "+this.options.fixedClass}this.updateBounds(true);this.updateStickyState(true)}if(!this.canSticky()){var height=this.state.disabled||this.state.bounds.height===null||!this.state.sticky&&!this.state.absolute?"auto":this.state.bounds.height+"px";this.wrapper.style.height=height;if(this.state.absolute!==this.lastState.absolute){this.wrapper.style.position=this.state.absolute?"relative":"";className=className.indexOf(this.options.absoluteClass)===-1&&this.state.absolute?className+(" "+this.options.absoluteClass):className.split(" "+this.options.absoluteClass).join("");this.el.style.marginTop=this.state.absolute&&this.state.style.top!==null?this.state.restrict.height-(this.state.bounds.height+this.state.style.top)+(this.state.restrict.top-this.state.bounds.top)+"px":"";this.el.style.marginBottom=this.state.absolute&&this.state.style.bottom!==null?this.state.restrict.height-(this.state.bounds.height+this.state.style.bottom)+(this.state.restrict.bottom-this.state.bounds.bottom)+"px":""}if(this.hasOwnScrollTarget&&!this.state.absolute&&this.lastState.fixedOffset!==this.state.fixedOffset){this.el.style.marginTop=this.state.fixedOffset}}var hasStateClass=className.indexOf(this.options.stateClassName)>-1;if(this.state.sticky&&!hasStateClass){className+=" "+this.options.stateClassName}else if(!this.state.sticky&&hasStateClass){className=className.split(" "+this.options.stateClassName).join("")}if(this.el.className!==className){this.el.className=className}return this.el};StickyState.native=function(){if(_globals.featureTested){return _globals.canSticky}if(typeof window!=="undefined"){_globals.featureTested=true;if(window.Modernizr&&window.Modernizr.hasOwnProperty("csspositionsticky")){return _globals.canSticky=window.Modernizr.csspositionsticky}var testEl=document.createElement("div");document.documentElement.appendChild(testEl);var prefixedSticky=["sticky","-webkit-sticky","-moz-sticky","-ms-sticky","-o-sticky"];_globals.canSticky=false;for(var i=0;i<prefixedSticky.length;i++){testEl.style.position=prefixedSticky[i];_globals.canSticky=!!window.getComputedStyle(testEl).position.match("sticky");if(_globals.canSticky){break}}document.documentElement.removeChild(testEl)}return _globals.canSticky};StickyState.apply=function(elements){if(elements){if(elements.length){for(var i=0;i<elements.length;i++){new StickyState(elements[i])}}else{new StickyState(elements)}}};module.exports=StickyState},{fastscroll:4,"object-assign":5}],2:[function(_dereq_,module,exports){(function(exports){"use strict";var delegate=function(target,handler){var args=[].slice.call(arguments,2);var fn=function(){return handler.apply(target,args)};return fn};typeof module!="undefined"&&module.exports?module.exports=delegate:typeof define!="undefined"?define(function(){return delegate}):exports.delegate=delegate})(this)},{}],3:[function(_dereq_,module,exports){"use strict";function isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true}var _instanceMap={};var EventDispatcher=function(){this._eventMap={};this._destroyed=false};EventDispatcher.getInstance=function(key){if(!key){throw new Error("key must be")}return _instanceMap[key]||(_instanceMap[key]=new EventDispatcher)};EventDispatcher.prototype.addListener=function(event,listener){var listeners=this.getListener(event);if(!listeners){this._eventMap[event]=[listener];return true}if(listeners.indexOf(listener)===-1){listeners.push(listener);return true}return false};EventDispatcher.prototype.addListenerOnce=function(event,listener){var s=this;var f2=function(){s.removeListener(event,f2);return listener.apply(this,arguments)};return this.addListener(event,f2)};EventDispatcher.prototype.removeListener=function(event,listener){if(typeof listener==="undefined"){return this.removeAllListener(event)}var listeners=this.getListener(event);if(listeners){var i=listeners.indexOf(listener);if(i>-1){listeners=listeners.splice(i,1);if(!listeners.length){delete this._eventMap[event]}return true}}return false};EventDispatcher.prototype.removeAllListener=function(event){var listeners=this.getListener(event);if(listeners){this._eventMap[event].length=0;delete this._eventMap[event];return true}return false};EventDispatcher.prototype.hasListener=function(event){return this.getListener(event)!==null};EventDispatcher.prototype.hasListeners=function(){return this._eventMap!==null&&this._eventMap!==undefined&&!isEmpty(this._eventMap)};EventDispatcher.prototype.dispatch=function(eventType,eventObject){var listeners=this.getListener(eventType);if(listeners){eventObject=eventObject||{};eventObject.type=eventType;eventObject.target=eventObject.target||this;var i=-1;while(++i<listeners.length){listeners[i](eventObject)}return true}return false};EventDispatcher.prototype.getListener=function(event){var result=this._eventMap?this._eventMap[event]:null;return result||null};EventDispatcher.prototype.destroy=function(){if(this._eventMap){for(var i in this._eventMap){this.removeAllListener(i)}this._eventMap=null}this._destroyed=true};EventDispatcher.prototype.on=EventDispatcher.prototype.bind=EventDispatcher.prototype.addEventListener=EventDispatcher.prototype.addListener;EventDispatcher.prototype.off=EventDispatcher.prototype.unbind=EventDispatcher.prototype.removeEventListener=EventDispatcher.prototype.removeListener;EventDispatcher.prototype.once=EventDispatcher.prototype.one=EventDispatcher.prototype.addListenerOnce;EventDispatcher.prototype.trigger=EventDispatcher.prototype.dispatchEvent=EventDispatcher.prototype.dispatch;module.exports=EventDispatcher},{}],4:[function(_dereq_,module,exports){"use strict";var delegate=_dereq_("delegatejs");var EventDispatcher=_dereq_("eventdispatcher");var _instanceMap={};function unprefixAnimationFrame(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame}var FastScroll=function(scrollTarget,options){scrollTarget=scrollTarget||window;if(FastScroll.hasScrollTarget(scrollTarget)){return FastScroll.getInstance(scrollTarget)}_instanceMap[scrollTarget]=this;this.options=options||{};if(!this.options.hasOwnProperty("animationFrame")){this.options.animationFrame=true}unprefixAnimationFrame();if(typeof window.requestAnimationFrame!=="function"){this.options.animationFrame=false}this.scrollTarget=scrollTarget;this.init()};FastScroll.___instanceMap=_instanceMap;FastScroll.getInstance=function(scrollTarget,options){scrollTarget=scrollTarget||window;return _instanceMap[scrollTarget]||new FastScroll(scrollTarget,options)};FastScroll.hasInstance=function(scrollTarget){return _instanceMap[scrollTarget]!==undefined};FastScroll.hasScrollTarget=FastScroll.hasInstance;FastScroll.clearInstance=function(scrollTarget){scrollTarget=scrollTarget||window;if(FastScroll.hasInstance(scrollTarget)){FastScroll.getInstance(scrollTarget).destroy();delete _instanceMap[scrollTarget]}};FastScroll.UP="up";FastScroll.DOWN="down";FastScroll.NONE="none";FastScroll.LEFT="left";FastScroll.RIGHT="right";FastScroll.prototype={destroyed:false,scrollY:0,scrollX:0,lastScrollY:0,lastScrollX:0,timeout:0,speedY:0,speedX:0,stopFrames:5,currentStopFrames:0,firstRender:true,animationFrame:true,lastEvent:{type:null,scrollY:0,scrollX:0},scrolling:false,init:function(){this.dispatcher=new EventDispatcher;this.updateScrollPosition=this.scrollTarget===window?delegate(this,this.updateWindowScrollPosition):delegate(this,this.updateElementScrollPosition);this.updateScrollPosition();this.trigger=this.dispatchEvent;this.lastEvent.scrollY=this.scrollY;this.lastEvent.scrollX=this.scrollX;this.onScroll=delegate(this,this.onScroll);this.onNextFrame=delegate(this,this.onNextFrame);if(this.scrollTarget.addEventListener){this.scrollTarget.addEventListener("mousewheel",this.onScroll,false);this.scrollTarget.addEventListener("scroll",this.onScroll,false)}else if(this.scrollTarget.attachEvent){this.scrollTarget.attachEvent("onmousewheel",this.onScroll);this.scrollTarget.attachEvent("scroll",this.onScroll)}},destroy:function(){if(!this.destroyed){this.cancelNextFrame();if(this.scrollTarget.addEventListener){this.scrollTarget.removeEventListener("mousewheel",this.onScroll);this.scrollTarget.removeEventListener("scroll",this.onScroll)}else if(this.scrollTarget.attachEvent){this.scrollTarget.detachEvent("onmousewheel",this.onScroll);this.scrollTarget.detachEvent("scroll",this.onScroll)}this.dispatcher.off();this.dispatcher=null;this.onScroll=null;this.updateScrollPosition=null;this.onNextFrame=null;this.scrollTarget=null;this.destroyed=true}},getAttributes:function(){return{scrollY:this.scrollY,scrollX:this.scrollX,speedY:this.speedY,speedX:this.speedX,angle:0,directionY:this.speedY===0?FastScroll.NONE:this.speedY>0?FastScroll.UP:FastScroll.DOWN,directionX:this.speedX===0?FastScroll.NONE:this.speedX>0?FastScroll.RIGHT:FastScroll.LEFT}},updateWindowScrollPosition:function(){this.scrollY=window.scrollY||window.pageYOffset||0;this.scrollX=window.scrollX||window.pageXOffset||0},updateElementScrollPosition:function(){this.scrollY=this.scrollTarget.scrollTop;this.scrollX=this.scrollTarget.scrollLeft},onScroll:function(){this.currentStopFrames=0;if(this.firstRender){this.firstRender=false;if(this.scrollY>1){this.updateScrollPosition();this.dispatchEvent("scroll:progress");return}}if(!this.scrolling){this.scrolling=true;this.dispatchEvent("scroll:start");if(this.options.animationFrame){this.nextFrameID=window.requestAnimationFrame(this.onNextFrame)}}if(!this.options.animationFrame){clearTimeout(this.timeout);this.onNextFrame();var self=this;this.timeout=setTimeout(function(){self.onScrollStop()},100)}},onNextFrame:function(){this.updateScrollPosition();this.speedY=this.lastScrollY-this.scrollY;this.speedX=this.lastScrollX-this.scrollX;this.lastScrollY=this.scrollY;this.lastScrollX=this.scrollX;if(this.options.animationFrame&&(this.scrolling&&this.speedY===0&&this.currentStopFrames++>this.stopFrames)){this.onScrollStop();return}this.dispatchEvent("scroll:progress");if(this.options.animationFrame){this.nextFrameID=requestAnimationFrame(this.onNextFrame)}},onScrollStop:function(){this.scrolling=false;if(this.options.animationFrame){this.cancelNextFrame();this.currentStopFrames=0}this.dispatchEvent("scroll:stop")},cancelNextFrame:function(){window.cancelAnimationFrame(this.nextFrameID)},dispatchEvent:function(type,eventObject){eventObject=eventObject||this.getAttributes();if(this.lastEvent.type===type&&this.lastEvent.scrollY===eventObject.scrollY&&this.lastEvent.scrollX===eventObject.scrollX){return}this.lastEvent={type:type,scrollY:eventObject.scrollY,scrollX:eventObject.scrollX};eventObject.target=this.scrollTarget;this.dispatcher.dispatch(type,eventObject)},on:function(event,listener){return this.dispatcher.addListener(event,listener)},off:function(event,listener){return this.dispatcher.removeListener(event,listener)}};module.exports=FastScroll},{delegatejs:2,eventdispatcher:3}],5:[function(_dereq_,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}]},{},[1])(1)});